@using TestWebsite.Enums;
@model TestWebsite.Models.Quote.QuoteViewModel
<form 
      method="post"
      asp-action="CreateQuote"
      asp-controller="QuoteForm"
      data-ajax="true" data-ajax-method="post"
      data-ajax-success="createQuoteSuccess"
      data-ajax-begin="createQuoteBegin"
      id="createQuoteForm">

    @Html.AntiForgeryToken()

    <div class="row">
        <div class="col form-group">
            @Html.LabelFor(x => x.Quote.ContactName)
@*            @Html.EnumDropDownListFor(model => model)*@
            @Html.TextBoxFor(x => x.Quote.ContactName, new { @class = "form-control" })
        </div>
        <div class="col form-group">
            @Html.LabelFor(x => x.Quote.EmailAddress)
            @Html.TextBoxFor(x => x.Quote.EmailAddress, new { @class = "form-control", @type = "email" })
        </div>
    </div>
    <div class="row">
        <div class="col form-group">
            @Html.LabelFor(x => x.Quote.TotalSize)
            @Html.TextBoxFor(x => x.Quote.TotalSize, new { @class = "form-control", @type = "number", @step = "any" })
        </div>
        <div class="col form-group">
            @Html.LabelFor(x => x.Quote.TotalRebuildCost)
            @Html.TextBoxFor(x => x.Quote.TotalRebuildCost, new { @class = "form-control", @type = "number", @step = "0.10" })
        </div>
    </div>

    <button id="submitQuoteFormBtn" type="submit" class="btn btn-primary">Submit</button>
</form>

<script>
    createQuoteSuccess = function (result) {
        if (!result.successful) {
            $("#submitQuoteFormBtn").removeClass("pe-none");
            $("#createQuoteForm").trigger("reset");
            alert(result.error);
            return;
        }
        alert("We have recieved your form, your reference is: " + result.reference + ".");
        $("#submitQuoteFormBtn").removeClass("pe-none");
        $("#createQuoteForm").trigger("reset");
    }
    createQuoteBegin = function()
    {
        $("#submitQuoteFormBtn").addClass("pe-none");
    }
</script>